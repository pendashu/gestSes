<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Tableau de bord â€“ UFR SES</title>
  <link rel="stylesheet" href="css/style.css">
  <style>
    .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0; }
    .stat { background: #e3f2fd; padding: 15px; border-radius: 6px; text-align: center; }
    .stat h3 { margin: 0 0 8px; color: #1565c0; }
    .stat p { margin: 0; font-size: 1.2em; font-weight: bold; }
  </style>
</head>
<body>
  <header style="display:flex; align-items:center; gap:20px; padding:10px 20px; background:#0d47a1; color:white;">
    <img src="images/logo-uasz.png" alt="UASZ" style="height:55px;">
    <div style="flex:1;">
      <h1 style="margin:0; font-size:1.5rem; font-weight:bold;">UFR SES â€” Tableau de bord</h1>
      <p style="margin:5px 0 0; opacity:0.9; font-size:0.9rem;">UniversitÃ© Assane Seck de Ziguinchor</p>
      <p style="margin:5px 0 0; font-size:0.95rem;">Bienvenue, <span id="welcomeName">Chargement...</span></p>
    </div>
    <a href="index.html" style="color:white; text-decoration:none; background:#d32f2f; padding:8px 16px; border-radius:5px; font-weight:bold;">
      ğŸ  Accueil
    </a>
  </header>

  <!-- âœ… RÃ©sumÃ© global -->
  <section style="max-width:1000px; margin:20px auto; padding:0 20px;">
    <h2 style="color:#0d47a1; margin-bottom:15px;">ğŸ“Š RÃ©sumÃ© global</h2>
    <div style="display:grid; grid-template-columns:repeat(auto-fit, minmax(250px, 1fr)); gap:15px; margin-bottom:20px;">
      <div style="background:#e3f2fd; padding:15px; border-radius:8px; text-align:center;">
        <h3 style="color:#0d47a1; margin:0 0 10px;">Budget total</h3>
        <p style="font-size:1.5rem; font-weight:bold; margin:0;">16 500 000 FCFA</p>
      </div>
      <div style="background:#ffebee; padding:15px; border-radius:8px; text-align:center;">
        <h3 style="color:#c62828; margin:0 0 10px;">DÃ©penses</h3>
        <p style="font-size:1.5rem; font-weight:bold; margin:0;">170 000 FCFA</p>
      </div>
      <div style="background:#e8f5e8; padding:15px; border-radius:8px; text-align:center;">
        <h3 style="color:#2e7d32; margin:0 0 10px;">Solde</h3>
        <p style="font-size:1.5rem; font-weight:bold; margin:0; color:green;">16 330 000 FCFA</p>
        <small>(Normal)</small>
      </div>
      <div style="background:#fff3e0; padding:15px; border-radius:8px; text-align:center;">
        <h3 style="color:#ff9800; margin:0 0 10px;">PER en attente</h3>
        <p style="font-size:1.5rem; font-weight:bold; margin:0;">4</p>
      </div>
      <div style="background:#fce4ec; padding:15px; border-radius:8px; text-align:center;">
        <h3 style="color:#c2185b; margin:0 0 10px;">Stocks critiques</h3>
        <p style="font-size:1.5rem; font-weight:bold; margin:0;">4</p>
      </div>
      <div style="background:#fff8e1; padding:15px; border-radius:8px; text-align:center;">
        <h3 style="color:#f57f17; margin:0 0 10px;">Consommation carburant</h3>
        <p style="font-size:1.5rem; font-weight:bold; margin:0;">60.3 L</p>
      </div>
    </div>
  </section>

  <!-- âœ… AccÃ¨s rapide -->
  <section style="max-width:1000px; margin:20px auto; padding:0 20px;">
    <h2 style="color:#0d47a1; margin-bottom:15px;">ğŸš€ AccÃ¨s rapide</h2>
    <div style="display:grid; grid-template-columns:repeat(auto-fit, minmax(200px, 1fr)); gap:15px;">

      <!-- Budget -->
      <a href="budget.html" style="background:#3f51b5; color:white; text-align:center; padding:20px; border-radius:8px; text-decoration:none; display:block; transition:transform 0.2s;">
        <div style="font-size:2rem; margin-bottom:10px;">ğŸ’°</div>
        <div>Budget</div>
      </a>

      <!-- PER -->
      <a href="per.html" style="background:#3f51b5; color:white; text-align:center; padding:20px; border-radius:8px; text-decoration:none; display:block; transition:transform 0.2s;">
        <div style="font-size:2rem; margin-bottom:10px;">ğŸ“Œ</div>
        <div>PER</div>
      </a>

      <!-- Stocks -->
      <a href="stocks.html" style="background:#3f51b5; color:white; text-align:center; padding:20px; border-radius:8px; text-decoration:none; display:block; transition:transform 0.2s;">
        <div style="font-size:2rem; margin-bottom:10px;">ğŸ“¦</div>
        <div>Stocks</div>
      </a>

      <!-- Carburant -->
      <a href="carburant.html" style="background:#3f51b5; color:white; text-align:center; padding:20px; border-radius:8px; text-decoration:none; display:block; transition:transform 0.2s;">
        <div style="font-size:2rem; margin-bottom:10px;">â›½</div>
        <div>Carburant</div>
      </a>

      <!-- Passation -->
      <a href="passation.html" style="background:#3f51b5; color:white; text-align:center; padding:20px; border-radius:8px; text-decoration:none; display:block; transition:transform 0.2s;">
        <div style="font-size:2rem; margin-bottom:10px;">ğŸ“‹</div>
        <div>Passation</div>
      </a>

    </div>
  </section>

  <!-- âœ… Exports (pour le directeur) -->
  <section style="max-width:1000px; margin:20px auto; padding:0 20px;">
    <h2 style="color:#0d47a1; margin-bottom:15px;">ğŸ“¥ Exports</h2>
    <div style="display:grid; grid-template-columns:repeat(auto-fit, minmax(200px, 1fr)); gap:15px;">

      <!-- Export PDF -->
      <button onclick="exportPDF()" style="background:#d32f2f; color:white; border:none; padding:15px; border-radius:8px; font-size:1.1rem; cursor:pointer; transition:background 0.3s;">
        ğŸ“„ Exporter en PDF
      </button>

      <!-- Export Excel -->
      <button onclick="exportExcel()" style="background:#2e7d32; color:white; border:none; padding:15px; border-radius:8px; font-size:1.1rem; cursor:pointer; transition:background 0.3s;">
        ğŸ“Š Exporter en Excel
      </button>

    </div>
  </section>
<script>
  // âœ… Fallback ultime â€” exÃ©cute aprÃ¨s tout le reste
  setTimeout(() => {
    try {
      const u = JSON.parse(localStorage.getItem("user"));
      const el = document.getElementById("welcomeName");
      if (el && u) {
        el.textContent = u.name || u.username || "Directeur";
      }
    } catch (e) {
      console.error("Fallback Ã©chouÃ© :", e);
    }
  }, 500);
</script>
  <script src="js/auth.js"></script>
  <script src="js/dashboard.js"></script>
</body>
</html>